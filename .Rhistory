"\nTime ", time, "\n")
return(live)
}
}
nselive()
nselive("fo")
#' @importFrom jsonlite fromJSON
#' @export
#' @examples \dontrun{
#' # NSE Live market data for Nifty 50 stocks
#' library(nser)
#' nselive()
#'
#' # Live market for F&O stocks
#' nselive("fo")
#' }
nselive = function(x = "n50"){
if(x == "n50"){
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_watch/stock_watch/niftyStockWatch.json')
live = dat[["data"]]
live = live[,-c(9,11,14, 15, 16, 17, 20, 21)]
live = `colnames<-`(live, c("SYMBOL", "OPEN", "HIGH", "LOW", "LTP", "Change", "% Change", "Volume (lacs)", "Turnover (crs)", "52 week High", "52 week Low", "Previous CLOSE", "CLOSE", "52 week % Change", "30 day % Change"))
adv = dat[["advances"]]
dec = dat[["declines"]]
time = dat[["time"]]
message("\nAdvances ", adv, "\n",
"\nDeclines ", dec, "\n",
"\nTime ", time, "\n")
return(live)
}
else if(x == "fo"){
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_watch/stock_watch/foSecStockWatch.json')
live = dat[["data"]]
live = live[,-c(9,11,14, 15, 16, 17, 20, 21)]
live = `colnames<-`(live,c("SYMBOL", "OPEN", "HIGH", "LOW", "LTP", "Change", "% Change", "Volume (lacs)", "Turnover (crs)", "52 week High", "52 week Low", "52 week % Change", "30 day % Change"))
adv = dat[["adv"]]
dec = dat[["dec"]]
time = dat[["time"]]
message("\nAdvances ", adv, "\n",
"\nDeclines ", dec, "\n",
"\nTime ", time, "\n")
return(live)
}
}
nselive()
nselive("fo")
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}\code{\link[nser]{fobhavtoday}}\code{\link[nser]{nseopen}}
#'
#' @import stats
#' @importFrom jsonlite fromJSON
#' @export
#' @examples \dontrun{
#' #Live status of Nifty Indices
#' library(nser)
#' indices()
#' }
indices = function(){
dat = fromJSON('https://www1.nseindia.com/homepage/Indices1.json')
dat = dat[["data"]]
dat = dat[,-5]
dat = `colnames<-`(dat, c("NAME", "Last Price", "Change", "% Change"))
return(dat)
}
indices()
dat = fromJSON('https://www1.nseindia.com/homepage/Indices1.json')
dat = dat[["data"]]
dat = fromJSON('https://www1.nseindia.com/homepage/Indices1.json')
View(dat)
time = dat[["time"]]
dat[["status"]]
status = dat[["status"]]
message("\nStatus ", status, "\n",
"\nTime ", time, "\n")
message("\n", status, "\n",
"\nTime ", time, "\n")
dat = fromJSON('https://www1.nseindia.com/homepage/Indices1.json')
live = dat[["data"]]
live = live[,-5]
live = `colnames<-`(live, c("NAME", "Last Price", "Change", "% Change"))
time = dat[["time"]]
status = dat[["status"]]
message("\n", status, "\n",
"\nTime ", time, "\n")
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}\code{\link[nser]{fobhavtoday}}\code{\link[nser]{nseopen}}
#'
#' @import stats
#' @importFrom jsonlite fromJSON
#' @export
#' @examples \dontrun{
#' #Live status of Nifty Indices
#' library(nser)
#' indices()
#' }
indices = function(){
dat = fromJSON('https://www1.nseindia.com/homepage/Indices1.json')
live = dat[["data"]]
live = live[,-5]
live = `colnames<-`(live, c("NAME", "Last Price", "Change", "% Change"))
time = dat[["time"]]
status = dat[["status"]]
message("\n", status, "\n",
"\nTime ", time, "\n")
return(dat)
}
indices()
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}\code{\link[nser]{fobhavtoday}}\code{\link[nser]{nseopen}}
#'
#' @import stats
#' @importFrom jsonlite fromJSON
#' @export
#' @examples \dontrun{
#' #Live status of Nifty Indices
#' library(nser)
#' indices()
#' }
indices = function(){
dat = fromJSON('https://www1.nseindia.com/homepage/Indices1.json')
live = dat[["data"]]
live = live[,-5]
live = `colnames<-`(live, c("NAME", "Last Price", "Change", "% Change"))
time = dat[["time"]]
status = dat[["status"]]
message("\n", status, "\n",
"\nTime ", time, "\n")
return(live)
}
indices()
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}\code{\link[nser]{fobhavtoday}}\code{\link[nser]{openfo}}
#'
#' @import stats
#' @importFrom rvest read_html html_nodes html_table
#' @export
#' @examples \dontrun{
#' # NSE IPO's
#' library(nser)
#' ipo = iponse()
#' }
iponse = function(){
url = 'https://www.moneycontrol.com/ipo/ipo-snapshot/issues-open.html'
dat = url %>%
read_html() %>%
html_nodes(xpath='//*[@id="mytable"]') %>%
html_table()
dat = dat[[1]]
return(dat)
}
iponse
iponse()
library(rvest)
iponse()
dat = as.data.frame(dat)
dat
url = 'https://www.moneycontrol.com/ipo/ipo-snapshot/issues-open.html'
dat = url %>%
read_html() %>%
html_nodes(xpath='//*[@id="mytable"]') %>%
html_table()
dat = dat[[1]]
dat = as.data.frame(dat)
dat
View(dat)
dat$`Equity /IPO Name`
library(stringr)
str_remove_all(dat$`Equity /IPO Name`, "\t")
str_remove_all(dat$`Equity /IPO Name`, "\t")
str_remove_all(dat$`Equity /IPO Name`, c("\t", "\r", "\n")
str_remove_all(dat$`Equity /IPO Name`, c("\t", "\r", "\n")
)
str_remove_all(dat$`Equity /IPO Name`, c("\t", "\r", "\n"))
str_remove_all(dat$`Equity /IPO Name`, "\t", "\r", "\n")
str_remove_all(dat$`Equity /IPO Name`, "\t")
nam = str_remove_all(dat$`Equity /IPO Name`, "\r")
nam
nam = str_remove_all(dat$`Equity /IPO Name`, "\t")
nam = str_remove_all(dat$`Equity /IPO Name`, "\r")
nam
nam = str_remove_all(dat$`Equity /IPO Name`, "\t")
nam
nam = str_remove_all(nam, "\r")
nam
nam = str_remove_all(nam, "\n")
nam
nam = str_remove_all(nam, "View Profile")
nam
dat$`Equity /IPO Name` = nam
dat
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}\code{\link[nser]{fobhavtoday}}\code{\link[nser]{openfo}}
#'
#' @import stats
#' @importFrom rvest stringr read_html html_nodes html_table str_remove_all
#' @export
#' @examples \dontrun{
#' # NSE IPO's
#' library(nser)
#' ipo = iponse()
#' }
iponse = function(){
url = 'https://www.moneycontrol.com/ipo/ipo-snapshot/issues-open.html'
dat = url %>%
read_html() %>%
html_nodes(xpath='//*[@id="mytable"]') %>%
html_table()
dat = dat[[1]]
dat = as.data.frame(dat)
nam = str_remove_all(dat$`Equity /IPO Name`, "\t")
nam = str_remove_all(nam, "\r")
nam = str_remove_all(nam, "\n")
nam = str_remove_all(nam, "View Profile")
dat$`Equity /IPO Name` = nam
return(dat)
}
iponse()
usethis::use_vignette("nseopen")
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/fo.json')
library(jsonlite)
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/fo.json')
View(dat)
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/nifty.json')
View(dat)
dat = dat[["data"]]
adv = dat[["advances"]]
dat[["declines"]]
dat[["declines"]]
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/all.json')
View(dat)
dat[["declines"]]
dat[["noChange"]]
adv = dat[["advances"]]
message("\nAdvances ", adv, "\n",
"\nDeclines ", dec, "\n",
"\nNo Change ", nc, "\n")
dec = dat[["declines"]]
nc = dat[["noChange"]]
message("\nAdvances ", adv, "\n",
"\nDeclines ", dec, "\n",
"\nNo Change ", nc, "\n")
message("\nAdvances -", adv, "\n",
"\nDeclines -", dec, "\n",
"\nNo Change -", nc, "\n")
message("\nAdvances - ", adv, "\n",
"\nDeclines - ", dec, "\n",
"\nNo Change - ", nc, "\n")
#' @importFrom jsonlite fromJSON
#' @export
#' @examples \dontrun{
#' # NSE Pre market open data of Nifty 50 stocks
#' library(nser)
#' nseopen("n50")
#'
#' # Pre market for F&O stocks
#' nseopen("fo")
#' }
nseopen = function(x = "n50"){
if(x == "n50"){
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/nifty.json')
dat = dat[["data"]]
dat = dat[,-c(2,3,4,14,15,16,17)]
dat = `colnames<-`(dat, c("SYMBOL", "Price", "Change", "%Change", "Prev.Close", "Quantity", "Value(in lakhs)", "FFM Caps(crs.)", "52 Week High", "52 Week Low"))
adv = dat[["advances"]]
dec = dat[["declines"]]
nc = dat[["noChange"]]
message("\nAdvances - ", adv, "\n",
"\nDeclines - ", dec, "\n",
"\nNo Change - ", nc, "\n")
return(dat)
}
else if(x == "fo"){
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/fo.json')
dat = dat[["data"]]
dat = dat[,-c(2,3,4,14,15,16,17)]
dat = `colnames<-`(dat, c("SYMBOL", "Price", "Change", "%Change", "Prev.Close", "Quantity", "Value(in lakhs)", "FFM Caps(crs.)", "52 Week High", "52 Week Low"))
adv = dat[["advances"]]
dec = dat[["declines"]]
nc = dat[["noChange"]]
message("\nAdvances - ", adv, "\n",
"\nDeclines - ", dec, "\n",
"\nNo Change - ", nc, "\n")
return(dat)
}
else if(x == "all"){
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/all.json')
dat = dat[["data"]]
dat = dat[,-c(2,3,4,14,15,16,17)]
dat = `colnames<-`(dat, c("SYMBOL", "Price", "Change", "%Change", "Prev.Close", "Quantity", "Value(in lakhs)", "FFM Caps(crs.)", "52 Week High", "52 Week Low"))
adv = dat[["advances"]]
dec = dat[["declines"]]
nc = dat[["noChange"]]
message("\nAdvances - ", adv, "\n",
"\nDeclines - ", dec, "\n",
"\nNo Change - ", nc, "\n")
return(dat)
}
}
nseopen()
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/nifty.json')
View(dat)
#' @importFrom jsonlite fromJSON
#' @export
#' @examples \dontrun{
#' # NSE Pre market open data of Nifty 50 stocks
#' library(nser)
#' nseopen("n50")
#'
#' # Pre market for F&O stocks
#' nseopen("fo")
#' }
nseopen = function(x = "n50"){
if(x == "n50"){
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/nifty.json')
open = dat[["data"]]
open = open[,-c(2,3,4,14,15,16,17)]
open = `colnames<-`(open, c("SYMBOL", "Price", "Change", "%Change", "Prev.Close", "Quantity", "Value(in lakhs)", "FFM Caps(crs.)", "52 Week High", "52 Week Low"))
adv = dat[["advances"]]
dec = dat[["declines"]]
nc = dat[["noChange"]]
message("\nAdvances - ", adv, "\n",
"\nDeclines - ", dec, "\n",
"\nNo Change - ", nc, "\n")
return(open)
}
else if(x == "fo"){
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/fo.json')
open = dat[["data"]]
open = open[,-c(2,3,4,14,15,16,17)]
open = `colnames<-`(open, c("SYMBOL", "Price", "Change", "%Change", "Prev.Close", "Quantity", "Value(in lakhs)", "FFM Caps(crs.)", "52 Week High", "52 Week Low"))
adv = dat[["advances"]]
dec = dat[["declines"]]
nc = dat[["noChange"]]
message("\nAdvances - ", adv, "\n",
"\nDeclines - ", dec, "\n",
"\nNo Change - ", nc, "\n")
return(open)
}
else if(x == "all"){
dat = fromJSON('https://www1.nseindia.com/live_market/dynaContent/live_analysis/pre_open/all.json')
open = dat[["data"]]
open = open[,-c(2,3,4,14,15,16,17)]
open = `colnames<-`(open, c("SYMBOL", "Price", "Change", "%Change", "Prev.Close", "Quantity", "Value(in lakhs)", "FFM Caps(crs.)", "52 Week High", "52 Week Low"))
adv = dat[["advances"]]
dec = dat[["declines"]]
nc = dat[["noChange"]]
message("\nAdvances - ", adv, "\n",
"\nDeclines - ", dec, "\n",
"\nNo Change - ", nc, "\n")
return(open)
}
}
nseopen()
nseopen("all")
nseopen("fo")
usethis::use_vignette("nselive")
usethis::use_vignette("nseipo")
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}\code{\link[nser]{fobhavtoday}}\code{\link[nser]{openfo}}
#'
#' @import stats
#' @importFrom rvest stringr read_html html_nodes html_table str_remove_all
#' @export
#' @examples \dontrun{
#' # NSE IPO's
#' library(nser)
#' ipo = nseipo()
#' }
nseipo = function(){
url = 'https://www.moneycontrol.com/ipo/ipo-snapshot/issues-open.html'
dat = url %>%
read_html() %>%
html_nodes(xpath='//*[@id="mytable"]') %>%
html_table()
dat = dat[[1]]
dat = as.data.frame(dat)
nam = str_remove_all(dat$`Equity /IPO Name`, "\t")
nam = str_remove_all(nam, "\r")
nam = str_remove_all(nam, "\n")
nam = str_remove_all(nam, "View Profile")
dat$`Equity /IPO Name` = nam
return(dat)
}
nseipo()
library(tidyverse)
?%>%
nseipo()
library(rvest)
library(httr)
nseipo()
usethis::use_vignette("nseindex")
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}\code{\link[nser]{fobhavtoday}}\code{\link[nser]{nseopen}}
#'
#' @import stats
#' @importFrom jsonlite fromJSON
#' @export
#' @examples \dontrun{
#' #Live status of Nifty Indices
#' library(nser)
#' nseindex()
#' }
nseindex = function(){
dat = fromJSON('https://www1.nseindia.com/homepage/Indices1.json')
live = dat[["data"]]
live = live[,-5]
live = `colnames<-`(live, c("NAME", "Last Price", "Change", "% Change"))
time = dat[["time"]]
status = dat[["status"]]
message("\n", status, "\n",
"\nTime ", time, "\n")
return(live)
}
nseindex()
nseindex()
dat = fromJSON('https://www1.nseindia.com/homepage/Indices1.json')
View(dat)
library(nser)
usethis::use_pipe()
library(nser)
devtools::submit_cran()
devtools::submit_cran()
use_cran_comments()
usethis::use_cran_comments()
library(jsonlite)
aa = fromJSON("https://www.nseindia.com/api/option-chain-indices?symbol=NIFTY")
View(aa)
aa[["filtered"]]
aa[["records"]]
aa[["filtered"]]
aa[["filtered"]]
az= fromJSON("https://www.nseindia.com/api/option-chain-equities?symbol=ADANIPORTS")
aa = fromJSON("https://www.nseindia.com/api/option-chain-indices?symbol=NIFTY")
View(aa)
az= GET("https://www.nseindia.com/api/option-chain-equities?symbol=ADANIPORTS")
library(httr)
az= GET("https://www.nseindia.com/api/option-chain-equities?symbol=ADANIPORTS")
az= GET("https://www.nseindia.com/api/option-chain-equities?symbol=AUROPHARMA")
az= fromJSON("https://www.nseindia.com/api/option-chain-equities?symbol=AUROPHARMA")
jsonlite::fromJSON('https://www.nseindia.com/api/option-chain-equities?symbol=ADANIPORTS'))
jsonlite::fromJSON('https://www.nseindia.com/api/option-chain-equities?symbol=ADANIPORTS')
library(nse2r)
nse_index_list()
nse_index_quote()
nse_stock_year_high(clean_names = TRUE)
nse_stock_year_high
dat = data.frame(aa = seq(1:10), ab = seq(11:20))
View(dat)
dat = data.frame(aa = seq(1:10), ab = seq(111:20))
?seq
dat = data.frame(aa = seq(1:10), ab = seq(11:20, by = 1))
dat = data.frame(aa = seq(1:10), ab = seq(11:30, by = 1))
dat = data.frame(aa = seq(1:10), ab = seq(11:30))
View(dat)
for(x in dat$aa){
print(x)
}
print(x + 1)
print([x] + 1)
for(x in dat$aa){
sum(x + 1)
}
for(x in dat$aa){
aa = sum(x + 1)
print(aa)
}
for(x in dat$aa){
print(tail(x))
}
for(x in dat$aa){
print(tail(x,4))
}
aa
library(gpbStat)
library(agricolae)
lineXtester
for(x in 1:dat$aa){
ss(i, i+2)
}
print(i, i+2)
for(x in 1:dat$aa){
print(x, x+2)
}
for(x in 1:dat$aa){
for(y in 1:dat$aa){
print(x + y)
}
}
for(x in 1:dat$aa){
for(y in 1:dat$aa){
print(x)
}
}
for(x in 1:dat$aa){
for(y in 1:dat$aa){
sum(x, y+1)
}
}
Vector <- paste("x", 1:6, sep="")
lapply(1:length(Vector), function(i) Vector[-i])
1:length(Vector)
vector(1:length(Vector))
diff(dat$aa)
View(dat)
dat %>%  mutate(col3_diff = aa - lag(ab))
library(dplyr)
dat %>%  mutate(col3_diff = aa - lag(ab))
dat = data.frame(aa = seq(1:10), ab = c(11:20))
dat %>%  mutate(col3_diff = aa - lag(ab))
dat %>%  mutate(sma = mean(lag(aa)))
dat %>%  mutate(sma = mean(aa))
?lag
lag(dat$aa, 3)
mean(lag(dat$aa, 3))
?mean
mean(lag(dat$aa, 3), na.rm = T)
dat %>%  mutate(sma = mean(aa, na.rm = T))
dat %>%  mutate(sma = mean(lag(aa), na.rm = T))
?c
