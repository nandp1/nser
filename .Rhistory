end = ".csv.zip"
bhavurl = paste0(baseurl, yr, "/", mt, "/fo", dy, mt, yr, "bhav", end)
zipname = paste0("fo", dy, mt, yr, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
file <-  read.csv(unz(temp, filename = zipname))
unlink(temp)
return(file)
}
}
fobhav = function(x){
if(!nchar(gsub("[^0-9]+", "", x)) == 8){
print("Check the date. It should be of 8 digits.")
} else{
x = as.character(x)
dy = substr(x, start = 0, stop = 2)
mt = substr(x, start = 3, stop = 4)
yr = substr(x, start = 5, stop = 8)
if(mt == "01"){
mt = "JAN"
} else if(mt == "02"){
mt = "FEB"
} else if(mt == "03"){
mt = "MAR"
} else if(mt == "04"){
mt = "APR"
} else if(mt == "05"){
mt = "MAY"
} else if(mt == "06"){
mt = "JUN"
} else if(mt == "07"){
mt = "JUL"
} else if(mt == "08"){
mt = "AUG"
} else if(mt == "09"){
mt = "SEP"
} else if(mt == "10"){
mt = "OCT"
} else if(mt == "11"){
mt = "NOV"
} else if(mt == "12"){
mt = "DEC"
}
baseurl = "https://archives.nseindia.com/content/historical/DERIVATIVES/"
end = ".csv.zip"
bhavurl = paste0(baseurl, yr, "/", mt, "/fo", dy, mt, yr, "bhav", end)
zipname = paste0("fo", dy, mt, yr, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
file <-  read.csv(unz(temp, filename = zipname))
unlink(temp)
return(file)
}
}
report = fobhav("01072021")
report = fobhav("0107202")
#'
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhavtody}}
#'
#' @import stats
#' @import lubridate
#' @export
#'
#' @examples report = bhav("01072021") # Download bhavcopy for 01 July 2021
#' report
#' write.csv(bhav, file = "bhav.csv") # to save the report.
bhav = function(x){
if(!nchar(gsub("[^0-9]+", "", x)) == 8){
print("Check the date. It should be of 8 digits.")
} else{
x = as.character(x)
dy = substr(x, start = 0, stop = 2)
mt = substr(x, start = 3, stop = 4)
yr = substr(x, start = 5, stop = 8)
if(mt == "01"){
mt = "JAN"
} else if(mt == "02"){
mt = "FEB"
} else if(mt == "03"){
mt = "MAR"
} else if(mt == "04"){
mt = "APR"
} else if(mt == "05"){
mt = "MAY"
} else if(mt == "06"){
mt = "JUN"
} else if(mt == "07"){
mt = "JUL"
} else if(mt == "08"){
mt = "AUG"
} else if(mt == "09"){
mt = "SEP"
} else if(mt == "10"){
mt = "OCT"
} else if(mt == "11"){
mt = "NOV"
} else if(mt == "12"){
mt = "DEC"
}
baseurl = "https://archives.nseindia.com/content/historical/EQUITIES/"
end = ".csv.zip"
bhavurl = paste0(baseurl, yr, "/", mt, "/cm", dy, mt, yr, "bhav", end)
zipname = paste0("cm", dy, mt, yr, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
file <-  read.csv(unz(temp, filename = zipname))
unlink(temp)
return(file)
}
}
#'
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhavtody}}
#'
#' @import stats
#' @import lubridate
#' @export
#'
#' @examples report = bhav("01072021") # Download bhavcopy for 01 July 2021
#' report
#' write.csv(bhav, file = "bhav.csv") # to save the report.
bhav = function(x){
if(!nchar(gsub("[^0-9]+", "", x)) == 8){
print("Check the date. It should be of 8 digits.")
} else{
x = as.character(x)
dy = substr(x, start = 0, stop = 2)
mt = substr(x, start = 3, stop = 4)
yr = substr(x, start = 5, stop = 8)
if(mt == "01"){
mt = "JAN"
} else if(mt == "02"){
mt = "FEB"
} else if(mt == "03"){
mt = "MAR"
} else if(mt == "04"){
mt = "APR"
} else if(mt == "05"){
mt = "MAY"
} else if(mt == "06"){
mt = "JUN"
} else if(mt == "07"){
mt = "JUL"
} else if(mt == "08"){
mt = "AUG"
} else if(mt == "09"){
mt = "SEP"
} else if(mt == "10"){
mt = "OCT"
} else if(mt == "11"){
mt = "NOV"
} else if(mt == "12"){
mt = "DEC"
}
baseurl = "https://archives.nseindia.com/content/historical/EQUITIES/"
end = ".csv.zip"
bhavurl = paste0(baseurl, yr, "/", mt, "/cm", dy, mt, yr, "bhav", end)
zipname = paste0("cm", dy, mt, yr, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
file <-  read.csv(unz(temp, filename = zipname))
unlink(temp)
return(file)
}
}
report = bhav("01072021")
report = bhav("0107202")
#' @author Nandan L. Patil \email{tryanother609@@gmail.com}
#' @details Gets Bhavcopy PR from NSE for the given date.
#'
#' @seealso \code{\link[nser]{bhav}}\code{\link[nser]{bhavtoday}}
#'
#' @import stats
#' @import lubridate
#' @export
#'
#' @examples report = bhavpr("01072021")
bhavpr = function(x){
if(!nchar(gsub("[^0-9]+", "", x)) == 8){
print("Check the date. It should be an Eight digit interger.")
} else{
x = as.character(x)
dy = substr(x, start = 0, stop = 2)
mt = substr(x, start = 3, stop = 4)
yrt = substr(x, start = 7, stop = 8)
baseurl = "https://archives.nseindia.com/archives/equities/bhavcopy/pr/"
end = ".zip"
bhavurl = paste0(baseurl, "PR", dy, mt, yrt, end)
temp <- tempfile()
download.file(bhavurl, temp)
unzip(temp)
files <- list.files(pattern = ".csv", full.names = T)
tbl <- sapply(files, read_csv)
unlink(temp)
return(tbl)
}
}
report = bhavpr("01072021")
?substr
?month.abb
devtools::document()
roxygen2::roxygenise()
roxygen2::roxygenise()
#' @author Nandan L. Patil \email{tryanother609@@gmail.com}
#' @details Gets todays bhavcopy from NSE.
#'
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}
#'
#' @import stats
#' @export
#'
#' @example report = bhavtoday()
#'
bhavtoday = function()
{
baseurl = "https://archives.nseindia.com/content/historical/EQUITIES/"
end = ".csv.zip"
month = format(Sys.time(), "%m")
month = as.integer(month)
month = month.abb[month]
month = toupper(month)
year = format(Sys.time(), "%Y")
date = format(Sys.time(), "%d")
bhavurl = paste0(baseurl, year, "/", month, "/cm", date, month, year, "bhav", end)
name = paste0(date, month, year)
zipname = paste0("cm", date, month, year, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
file <-  read.csv(unz(temp, filename = zipname))
unlink(temp)
assign(name, file)
return(file)
}
report = bhavtoday()
devtools::document()
devtools::document()
library(roxygen2)
library(usethis)
usethis::use_pkgdown()
pkgdown::build_site()
use_readme_rmd()
# Download Equity Bhavcopy
library(nser)
baseurl = "https://archives.nseindia.com/content/historical/EQUITIES/"
end = ".csv.zip"
month = format(Sys.time(), "%m")
month = as.integer(month)
month = month.abb[month]
month = toupper(month)
year = format(Sys.time(), "%Y")
date = format(Sys.time(), "%d")
bhavurl = paste0(baseurl, yr, "/", mt, "/fo", dy, mt, yr, "bhav", end)
bhavurl = paste0(baseurl, yr, "/", mt, "/fo", date, month, year, "bhav", end)
bhavurl = paste0(baseurl, year, "/", mt, "/fo", date, month, year, "bhav", end)
bhavurl = paste0(baseurl, year, "/", month, "/fo", date, month, year, "bhav", end)
bhavurl
zipname = paste0("fo", date, month, year, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
baseurl = "https://archives.nseindia.com/content/historical/DERIVATIVES/"
end = ".csv.zip"
month = format(Sys.time(), "%m")
month = as.integer(month)
month = month.abb[month]
month = toupper(month)
year = format(Sys.time(), "%Y")
date = format(Sys.time(), "%d")
bhavurl = paste0(baseurl, year, "/", month, "/fo", date, month, year, "bhav", end)
name = paste0(date, month, year)
zipname = paste0("fo", date, month, year, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
download.file(bhavurl, temp)
file <-  read.csv(unz(temp, filename = zipname))
View(file)
unlink(temp)
return(file)
#' @details Gets todays Futures and Options bhavcopy from NSE.
#'
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}
#'
#' @import stats
#' @export
#' @examples \dontrun{#Todays F&O Bhavcopy
#' library(nser)
#' report = bhavtoday()
#' }
bhavtoday = function()
{
baseurl = "https://archives.nseindia.com/content/historical/DERIVATIVES/"
end = ".csv.zip"
month = format(Sys.time(), "%m")
month = as.integer(month)
month = month.abb[month]
month = toupper(month)
year = format(Sys.time(), "%Y")
date = format(Sys.time(), "%d")
bhavurl = paste0(baseurl, year, "/", month, "/fo", date, month, year, "bhav", end)
name = paste0(date, month, year)
zipname = paste0("fo", date, month, year, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
file <-  read.csv(unz(temp, filename = zipname))
unlink(temp)
return(file)
}
#' @details Gets todays Futures and Options bhavcopy from NSE.
#'
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}
#'
#' @import stats
#' @export
#' @examples \dontrun{#Todays F&O Bhavcopy
#' library(nser)
#' report = bhavtoday()
#' }
fobhavtoday = function()
{
baseurl = "https://archives.nseindia.com/content/historical/DERIVATIVES/"
end = ".csv.zip"
month = format(Sys.time(), "%m")
month = as.integer(month)
month = month.abb[month]
month = toupper(month)
year = format(Sys.time(), "%Y")
date = format(Sys.time(), "%d")
bhavurl = paste0(baseurl, year, "/", month, "/fo", date, month, year, "bhav", end)
name = paste0(date, month, year)
zipname = paste0("fo", date, month, year, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
file <-  read.csv(unz(temp, filename = zipname))
unlink(temp)
return(file)
}
fobhavtoday()
#' @details Gets todays Futures and Options bhavcopy from NSE.
#'
#' @seealso \code{\link[nser]{bhavpr}}\code{\link[nser]{bhav}}
#'
#' @import stats
#' @export
#' @examples \dontrun{#Todays F&O Bhavcopy
#' library(nser)
#' report = fobhavtoday()
#' }
fobhavtoday = function()
{
baseurl = "https://archives.nseindia.com/content/historical/DERIVATIVES/"
end = ".csv.zip"
month = format(Sys.time(), "%m")
month = as.integer(month)
month = month.abb[month]
month = toupper(month)
year = format(Sys.time(), "%Y")
date = format(Sys.time(), "%d")
bhavurl = paste0(baseurl, year, "/", month, "/fo", date, month, year, "bhav", end)
name = paste0(date, month, year)
zipname = paste0("fo", date, month, year, "bhav", ".csv")
temp <- tempfile()
download.file(bhavurl, temp)
file <-  read.csv(unz(temp, filename = zipname))
unlink(temp)
return(file)
}
fobhavtoday()
devtools::document()
devtools::document()
usethis::use_vignette()
usethis::use_vignette(bhav())
usethis::use_vignette(bhav
)
usethis::use_vignette("bhav")
# Example
library(nser)
report = bhav("01072021")
head(report)
Historical
devtools::document()
devtools::build_vignettes()
library(nser)
usethis::use_vignette(bhavtoday)
usethis::use_vignette(bhavpr)
usethis::use_vignette("bhavtoday")
usethis::use_vignette("fobhavtoday")
usethis::use_vignette("bhavpr")
library(nser)
report = bhavpr("01072021")
View(report)
#' @return List of Bhavcopy PR for the given date.
#' @author Nandan L. Patil \email{tryanother609@@gmail.com}
#' @details Gets Bhavcopy PR from NSE for the given date.
#'
#' @seealso \code{\link[nser]{bhav}}\code{\link[nser]{bhavtoday}}
#'
#' @import stats
#' @export
#'
#' @examples report = bhavpr("01072021")
bhavpr = function(x){
if(!nchar(gsub("[^0-9]+", "", x)) == 8){
print("Check the date. It should be an Eight digit interger.")
} else{
x = as.character(x)
dy = substr(x, start = 0, stop = 2)
mt = substr(x, start = 3, stop = 4)
yrt = substr(x, start = 7, stop = 8)
baseurl = "https://archives.nseindia.com/archives/equities/bhavcopy/pr/"
end = ".zip"
bhavurl = paste0(baseurl, "PR", dy, mt, yrt, end)
temp <- tempfile()
download.file(bhavurl, temp)
unzip(temp)
files <- list.files(pattern = ".csv", full.names = T)
tbl <- sapply(files, read_csv)
unlink(temp)
return(tbl)
}
}
report = bhavpr("01072021")
?read_csv
??read_csv
library(readr)
?read_csv
report = bhavpr("01072021")
View(report)
library(nser)
report = bhavpr("01072021")
View(report)
head(report)
str(report)
library(readr)
?invisible
f1 <- function(x) x
f1
f2 <- function(x) invisible(x)
f2
f1(zz)
f1("zz")
f2("zz")
mm = f2("zz")
#' @author Nandan L. Patil \email{tryanother609@@gmail.com}
#' @details Gets Bhavcopy PR from NSE for the given date.
#'
#' @seealso \code{\link[nser]{bhav}}\code{\link[nser]{bhavtoday}}
#'
#' @import stats
#' @import readr
#' @export
#'
#' @examples report = bhavpr("01072021")
bhavpr = function(x){
if(!nchar(gsub("[^0-9]+", "", x)) == 8){
print("Check the date. It should be an Eight digit interger.")
} else{
x = as.character(x)
dy = substr(x, start = 0, stop = 2)
mt = substr(x, start = 3, stop = 4)
yrt = substr(x, start = 7, stop = 8)
baseurl = "https://archives.nseindia.com/archives/equities/bhavcopy/pr/"
end = ".zip"
bhavurl = paste0(baseurl, "PR", dy, mt, yrt, end)
temp <- tempfile()
download.file(bhavurl, temp)
unzip(temp)
invisible(files <- list.files(pattern = ".csv", full.names = T))
tbl <- sapply(files, read_csv)
unlink(temp)
return(tbl)
}
}
report = bhavpr("01072021")
?silent
report = invisible(bhavpr("01072021"))
?quiet
silence
invisible(bhavpr("01072021"))
usethis::use_vignette("fobhav")
devtools::document()
devtools::document()
devtools::build_site()
devtools::build_rmd()
devtools::build_vignettes()
devtools::check_man()
devtools::check_built()
devtools::check()
devtools::check()
?download.file
library(utils)
read.csv()
?read.csv
?unzip
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
library(jsonlite)
library(utils)
devtools::build_manual()
devtools::build_vignettes()
devtools::check_man()
devtools::check()
?read_csv
devtools::check()
devtools::spell_check()
devtools::spell_check()
devtools::build_site()
file.exists("~/.ssh/id_rsa.pub")
usethis::use_pkgdown()
pkgdown::build_site()
library(nser)
devtools::submit_cran()
